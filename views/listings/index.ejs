<% layout("/layouts/boilerplates") %>
<style>
#filters-container {
  display: flex;
  align-items: center;   /* vertically center filters & toggle */
  gap: 1rem;
  padding: 0 1rem;
  overflow-x:auto;     /* scroll horizontally if needed */
  
}

#filters {
  display: flex;
  flex-wrap: nowrap;
  gap: 1.5rem;
  overflow-x: auto;
  white-space: nowrap;
  flex: 1;   
  border-radius: 0.5rem;
  box-shadow: 0px 4px 6px rgba(0,0,0,0.9);
  background: #fff;
  padding: 1rem;
  margin: 0;             /* remove offset-1 */
  max-width:83%;
  margin-left: 20px;
  
}

 .tax-toggle { 
  
  
  gap: 1.5rem;
  overflow-x: auto;
  flex: 1;               /* take all remaining space */
  background: #fff;
  padding: 1rem;
  margin: 0;   
  box-shadow: 0px 4px 6px rgba(0,0,0,0.9);
  border-radius: 0.5rem;      
  max-width:13%;
  float: right;
  height: 80%;
  margin-right: 20px;
  margin-top: -80px;
  align-items: center;
}

/* Filters styling remains same */
.filter {
  flex: 0 0 auto;
  text-align: center;
  opacity: 0.8;
  transition: opacity 0.2s, transform 0.2s;
  min-width: 80px;
}

.filter:hover {
  opacity: 1;
  cursor: pointer;
  transform: scale(1.05);
}

.filter i { font-size: 1.6rem; }
.filter p { font-size: 0.8rem; margin: 0.3rem 0 0 0; }

/* Scrollbar styling */
#filters::-webkit-scrollbar { height: 1px; }
#filters::-webkit-scrollbar-thumb { background: #ccc; border-radius: 1px; }
#filters::-webkit-scrollbar-track { background: transparent; }

/* Responsive adjustments */
@media (max-width: 768px) {
  .filter i { font-size: 1.6rem; }
  .filter p { font-size: 0.7rem; }
  .tax-toggle { min-width: 120px; }
}

@media (max-width: 480px) {
  .filter i { font-size: 1.4rem; }
  .filter p { font-size: 0.65rem; }
  .tax-toggle { min-width: 100px; }
}
.tax-info{
  display: none;
}


</style>     
<div id="filters" class="offset-1">
      <div class="filter">
        <div><i class="fa-solid fa-fire"></i></div>
         <p>Trending</p>
      </div>
      <div class="filter">
        <div><i class="fa-solid fa-cart-flatbed"></i></div>
         <p>Rooms</p>
      </div>

      <div class="filter">
        <div><i class="fa-solid fa-mountain-sun"></i></div>
         <p>Mountain</p>
      </div>


      <div class="filter">
      <div><i class="fa-solid fa-city"></i></div>
      <p>Iconic City</p>
      </div>

      <div class="filter">
      <div><i class="fa-solid fa-person-swimming"></i></div>
      <p>Swimming Water</p>
      </div>

      <div class="filter">
      <div><i class="fa-solid fa-hotel"></i></div>
      <p>Hotel</p>
      </div>


      <div class="filter">
      <div><i class="fa-solid fa-bowl-food"></i></div>
      <p>Food</p>
      </div>
      
      
      <div class="filter">
      <div><i class="fa-solid fa-taxi"></i></div>
      <p>Taxi</p>
      </div>

      
      <div class="filter">
      <div><i class="fa-solid fa-phone-volume"></i></div>
      <p>Contact</p>
      </div>

      
      <div class="filter">
      <div><i class="fa-solid fa-phone-volume"></i></div>
      <p>Contact</p>
      </div>
      
      



      
        



    </div>

    
       <div class="tax-toggle">
      <div class="form-check-reverse form-switch">
        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
       <label for="flexSwitchCheckDefault" class="form-check-label">Display Taxes</label>
      </div>
      </div>
  








  <div class="container mt-4">
    <!-- <h3 class="mb-4">All Listings</h3> -->
    
    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 g-4">
      <% for(let listing of allListings){ %>
        <div class="col">
          <a href="/listings/<%= listing._id %>" class="text-decoration-none">
            <div class="card listing-card h-100">
              <!-- Safe image check -->
              <img 
                src="<%= listing.image ? listing.image.url : '/default.jpg' %>" 
                class="card-img-top" 
                alt="listing image" 
                style="height: 20rem; object-fit: cover;"
              >
              <div class="card-body">
                <h5 class="card-title"><%= listing.title %></h5>
                <p class="card-text">&#8377; <%= listing.price %>
                  <i class= "tax-info">+18% GST</i>
                </p>
              </div>
            </div>
          </a>
        </div>
      <% } %>
    </div>
  </div>
  <script>
   let taxSwitch = document.getElementById("flexSwitchCheckDefault");
   taxSwitch.addEventListener("click", () =>{
    let taxinfo = document.getElementsByClassName("tax-info");
    for(info of taxinfo){
      if(info.style.display != "inline"){
           info.style.display = "inline";
      }else{
        info.style.display = "none";
      }
     
    }
   });    

  </script>